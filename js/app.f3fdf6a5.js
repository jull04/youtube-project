(function(){"use strict";var e={6367:function(e,t,o){var r=o(3751),i=o(641);function a(e,t,o,r,a,s){const n=(0,i.g2)("AppHeader"),d=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(n),(0,i.bF)(d)],64)}const s={class:"header__nav"},n={class:"header__nav-links"};function d(e,t,o,r,a,d){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("header",null,[(0,i.Lk)("div",s,[(0,i.Lk)("ul",n,[(0,i.Lk)("li",null,[(0,i.bF)(c,{class:"header__nav-link",to:"/youtube-project/"},{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.eW)("Главная")]))),_:1})]),(0,i.Lk)("li",null,[(0,i.bF)(c,{class:"header__nav-link",to:"/saved"},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.eW)("Мои Видео")]))),_:1})])])])])}var c={name:"AppHeader"},l=o(6262);const u=(0,l.A)(c,[["render",d]]);var v=u,h={name:"App",components:{AppHeader:v}};const p=(0,l.A)(h,[["render",a]]);var _=p,f=o(5220),g=o(33);const y={class:"main"},m={key:1,class:"main__error"},b={key:2,class:"main__videos-grid"},k={key:3,class:"main__button-container"};function S(e,t,o,r,a,s){const n=(0,i.g2)("SearchForm"),d=(0,i.g2)("SearchPreloader"),c=(0,i.g2)("VideoCard");return(0,i.uX)(),(0,i.CE)("div",y,[t[3]||(t[3]=(0,i.Lk)("h1",null,"Поиск видео на YouTube",-1)),(0,i.bF)(n,{query:a.query,shortOnly:a.shortOnly,disableShortFilter:0===a.videos.length,onSearch:s.handleSearch,onToggleShort:t[0]||(t[0]=e=>a.shortOnly=e)},null,8,["query","shortOnly","disableShortFilter","onSearch"]),a.isLoading?((0,i.uX)(),(0,i.Wv)(d,{key:0})):(0,i.Q3)("",!0),a.error?((0,i.uX)(),(0,i.CE)("div",m,(0,g.v_)(a.error),1)):(0,i.Q3)("",!0),a.videos.length>0?((0,i.uX)(),(0,i.CE)("div",b,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.filteredVideos.slice(0,a.visibleCount),(e=>((0,i.uX)(),(0,i.Wv)(c,{key:e.id.videoId,video:e,isSaved:s.isSaved(e),onToggleLike:s.toggleLike},null,8,["video","isSaved","onToggleLike"])))),128))])):(0,i.Q3)("",!0),a.visibleCount<a.videos.length?((0,i.uX)(),(0,i.CE)("div",k,[t[2]||(t[2]=(0,i.eW)(" > ")),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.showMore&&s.showMore(...e)),class:"main__button"},"Показать ещё")])):(0,i.Q3)("",!0)])}o(4114),o(8111),o(2489),o(1701),o(3579);const L={class:"preloader"};function I(e,t){return(0,i.uX)(),(0,i.CE)("div",L,t[0]||(t[0]=[(0,i.Lk)("div",{class:"preloader__container"},[(0,i.Lk)("span",{class:"preloader__round"})],-1)]))}const C={},w=(0,l.A)(C,[["render",I],["__scopeId","data-v-7acdea7d"]]);var V=w;const O={class:"card"},q=["href"],E=["src"],T={class:"card__info"},j={class:"card__title"},x={class:"card__channel-title"},F={class:"card__meta card__duration"},X={class:"card__meta card__views"};function A(e,t,o,a,s,n){return(0,i.uX)(),(0,i.CE)("div",O,[(0,i.Lk)("a",{class:"card__link",href:n.videoUrl,target:"_blank",rel:"noopener"},[(0,i.Lk)("img",{src:o.video.snippet.thumbnails.medium.url,alt:"Thumbnail",class:"card__thumbnail"},null,8,E),(0,i.Lk)("div",T,[(0,i.Lk)("h3",j,(0,g.v_)(o.video.snippet.title),1),(0,i.Lk)("p",x,(0,g.v_)(o.video.snippet.channelTitle),1),(0,i.Lk)("p",F,"Длительность: "+(0,g.v_)(n.formatDuration(o.video.extra?.duration)),1),(0,i.Lk)("p",X,(0,g.v_)(n.formatViews(o.video.extra?.views)),1),(0,i.Lk)("button",{class:(0,g.C4)(o.isSaved?"card__button-saved":"card__button"),onClick:t[0]||(t[0]=(0,r.D$)(((...e)=>n.handleLike&&n.handleLike(...e)),["stop","prevent"]))},(0,g.v_)(o.isSaved?"":"Сохранить"),3)])],8,q)])}function $(e){if(!e)return"неизвестно";const t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!t)return"неизвестно";const o=parseInt(t[1]||0,10),r=parseInt(t[2]||0,10),i=parseInt(t[3]||0,10),a=e=>e.toString().padStart(2,"0");return o>0?`${o}:${a(r)}:${a(i)}`:`${a(r)}:${a(i)}`}function Q(e){return Number(e).toLocaleString("ru-RU")+" просмотров"}var J={props:{video:Object,isSaved:Boolean},computed:{videoUrl(){return`https://www.youtube.com/watch?v=${this.video.id.videoId}`}},methods:{formatDuration:$,formatViews:Q,handleLike(){this.$emit("toggle-like",this.video)}}};const D=(0,l.A)(J,[["render",A],["__scopeId","data-v-353534ec"]]);var M=D;const N={class:"search__form"},P={class:"search__bar"},H={class:"search__filter-toggle"},W={class:"search__checkbox-container"},B=["checked","disabled"];function U(e,t,o,a,s,n){return(0,i.uX)(),(0,i.CE)("div",N,[(0,i.Lk)("div",P,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.localQuery=e),placeholder:"Введите запрос",class:"search__input",onKeyup:t[1]||(t[1]=(0,r.jR)((t=>e.$emit("search",o.query)),["enter"]))},null,544),[[r.Jo,s.localQuery]]),(0,i.Lk)("button",{onClick:t[2]||(t[2]=t=>e.$emit("search",o.query)),class:"search__button"},"Поиск")]),(0,i.Lk)("div",H,[(0,i.Lk)("label",W,[(0,i.Lk)("input",{class:"search__checkbox",type:"checkbox",checked:o.shortOnly,onChange:t[3]||(t[3]=t=>e.$emit("toggle-short",t.target.checked)),disabled:o.disableShortFilter},null,40,B),t[4]||(t[4]=(0,i.Lk)("span",{class:"search__checkbox-label"},"Короткие (до 40 мин)",-1))])])])}var K={props:{query:String,shortOnly:Boolean,disableShortFilter:Boolean},data(){return{localQuery:this.query}},watch:{query(e){this.localQuery=e}},methods:{emitSearch(){this.$emit("search",this.localQuery)}}};const R=(0,l.A)(K,[["render",U],["__scopeId","data-v-70714c8a"]]);var Y=R,z=(o(7588),o(4335));const G=z.A.create({baseURL:"https://www.googleapis.com/youtube/v3"});var Z=G;const ee="AIzaSyBSQ-k2iDb_yNfjrBo9JJ9HFVWCAVm6Hts";async function te(e,t=20){const o=await Z.get("/search",{params:{part:"snippet",maxResults:t,q:e,key:ee,type:"video"}});return o.data.items}async function oe(e){const t=await Z.get("/videos",{params:{part:"contentDetails,statistics",id:e.join(","),key:ee}}),o={};return t.data.items.forEach((e=>{o[e.id]={duration:e.contentDetails.duration,views:e.statistics.viewCount}})),o}var re={components:{SearchPreloader:V,VideoCard:M,SearchForm:Y},data(){return{query:"",videos:[],isLoading:!1,error:null,visibleCount:10,shortOnly:!1,savedVideos:[]}},methods:{handleSearch(e){this.query=e,this.searchVideos()},async searchVideos(){if(""===this.query.trim())return this.videos=[],void(this.visibleCount=10);this.isLoading=!0,this.error=null;try{const e=await te(this.query),t=e.map((e=>e.id.videoId)),o=await oe(t);this.videos=e.map((e=>({...e,extra:o[e.id.videoId]||{}}))),this.visibleCount=10,localStorage.setItem("youtube_query",this.query),localStorage.setItem("youtube_results",JSON.stringify(this.videos))}catch(e){this.error="Ошибка при загрузке данных с YouTube"}finally{this.isLoading=!1}},toggleLike(e){const t=this.savedVideos.findIndex((t=>t.id.videoId===e.id.videoId));-1!==t?this.savedVideos.splice(t,1):this.savedVideos.push(e),this.updateLocalStorage()},isSaved(e){return this.savedVideos.some((t=>t.id.videoId===e.id.videoId))},updateLocalStorage(){localStorage.setItem("youtube_saved",JSON.stringify(this.savedVideos))},parseTimeDuration(e){if(!e)return 0;const t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!t)return 0;const o=parseInt(t[1]||0,10),r=parseInt(t[2]||0,10),i=parseInt(t[3]||0,10);return 3600*o+60*r+i},showMore(){this.visibleCount+=10}},mounted(){const e=localStorage.getItem("youtube_query"),t=localStorage.getItem("youtube_results"),o=localStorage.getItem("youtube_saved");e&&t&&(this.query=e,this.videos=JSON.parse(t)),o&&(this.savedVideos=JSON.parse(o))},computed:{filteredVideos(){return this.shortOnly?this.videos.filter((e=>{const t=this.parseTimeDuration(e.extra?.duration);return t<=2400})):this.videos}}};const ie=(0,l.A)(re,[["render",S],["__scopeId","data-v-344a6f70"]]);var ae=ie;const se={class:"youtube-search"},ne={key:0,class:"videos-grid"};function de(e,t,o,r,a,s){const n=(0,i.g2)("VideoCard");return(0,i.uX)(),(0,i.CE)("div",se,[(0,i.Lk)("h1",null,(0,g.v_)(a.savedVideos.length>0?"Сохранённые видео":"Нет сохранённых видео"),1),a.savedVideos.length>0?((0,i.uX)(),(0,i.CE)("div",ne,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.savedVideos,(e=>((0,i.uX)(),(0,i.Wv)(n,{key:e.id.videoId,video:e,isSaved:!0,onToggleLike:s.toggleLike},null,8,["video","onToggleLike"])))),128))])):(0,i.Q3)("",!0)])}var ce={name:"SavedVideos",components:{VideoCard:M},data(){return{savedVideos:[]}},mounted(){const e=localStorage.getItem("youtube_saved");this.savedVideos=e?JSON.parse(e):[]},methods:{toggleLike(e){this.savedVideos=this.savedVideos.filter((t=>t.id.videoId!==e.id.videoId)),localStorage.setItem("youtube_saved",JSON.stringify(this.savedVideos))}}};const le=(0,l.A)(ce,[["render",de],["__scopeId","data-v-78ffa2e7"]]);var ue=le;const ve=[{path:"/youtube-project/",name:"Main",component:ae},{path:"/saved",name:"Saved",component:ue}],he=(0,f.aE)({history:(0,f.LA)(),routes:ve});var pe=he;(0,r.Ef)(_).use(pe).mount("#app")}},t={};function o(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,r,i,a){if(!r){var s=1/0;for(l=0;l<e.length;l++){r=e[l][0],i=e[l][1],a=e[l][2];for(var n=!0,d=0;d<r.length;d++)(!1&a||s>=a)&&Object.keys(o.O).every((function(e){return o.O[e](r[d])}))?r.splice(d--,1):(n=!1,a<s&&(s=a));if(n){e.splice(l--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,i,a]}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,a,s=r[0],n=r[1],d=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(i in n)o.o(n,i)&&(o.m[i]=n[i]);if(d)var l=d(o)}for(t&&t(r);c<s.length;c++)a=s[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(l)},r=self["webpackChunkyoutube_project"]=self["webpackChunkyoutube_project"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(6367)}));r=o.O(r)})();
//# sourceMappingURL=app.f3fdf6a5.js.map